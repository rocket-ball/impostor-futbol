<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Impostor F√∫tbol ‚Äî Juego</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-color: #0d1a2d;
      --card-color: #1a273b;
      --text-color: #ffffff;
      --primary-color: #4CAF50;
      --secondary-color: #2e3a51;
      --impostor-color: #3b1a1a;
    }

    body {
      margin: 0;
      background: var(--bg-color);
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
      padding: 20px;
    }

    h1 {
      text-align: center;
      font-weight: 900;
      color: var(--primary-color);
    }

    .screen {
      display: none;
      max-width: 450px;
      margin: auto;
    }
    .screen.active {
      display: block;
    }

    .card {
      background: var(--card-color);
      padding: 25px;
      border-radius: 16px;
      margin-top: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    input, button {
      width: 100%;
      padding: 16px;
      margin-top: 15px;
      border-radius: 12px;
      border: none;
      font-size: 17px;
      box-sizing: border-box;
    }

    input {
      background: var(--secondary-color);
      color: var(--text-color);
    }

    button {
      background: var(--primary-color);
      color: black;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
        background: #66BB6A;
    }

    button.secondary {
      background: var(--secondary-color);
      color: var(--text-color);
    }

    .flip {
      min-height: 220px;
      background: var(--secondary-color);
      padding: 40px 20px;
      border-radius: 16px;
      text-align: center;
      cursor: pointer;
      user-select: none;
      font-size: 24px;
      font-weight: 700;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: all 0.5s ease;
      color: white;
    }

    .flip.revealed {
        background: var(--card-color);
        animation: flip-reveal 0.4s ease-out;
    }

    .flip.impostor {
        background: var(--impostor-color);
    }

    @keyframes flip-reveal {
      0% { transform: scaleY(0); opacity: 0; }
      100% { transform: scaleY(1); opacity: 1; }
    }

    .hidden { display: none; }

    .player-count {
        font-size: 14px;
        color: #ccc;
        margin-top: 10px;
    }

  </style>
</head>
<body>

<h1>‚öΩ Impostor F√∫tbol</h1>

<!-- PANTALLA 1 -->
<section id="screen1" class="screen active">
  <div class="card">
    <p>¬øCu√°ntos jugadores (3-20) sois?</p>
    <input id="numPlayers" type="number" min="3" max="20" placeholder="Ej: 6" />
    <button id="confirmPlayers">Confirmar</button>
  </div>
</section>

<!-- PANTALLA 2 -->
<section id="screen2" class="screen">
  <div class="card">
    <p>Introduce los nombres:</p>
    <div id="namesContainer"></div>
    <button id="startGame">Empezar partida</button>
  </div>
</section>

<!-- PANTALLA 3 -->
<section id="screen3" class="screen">
  <div class="card">
    <div id="flipCard" class="flip">
        <span id="playerInstruction">Pulsa para ver tu rol</span>
        <span id="playerCounter" class="player-count"></span>
    </div>
    <button id="btnNext" class="hidden">Siguiente jugador</button>
  </div>
</section>

<!-- PANTALLA 4 -->
<section id="screen4" class="screen">
  <div class="card">
    <h3 id="starter"></h3>
    <p>Cuando se vote, pulsa:</p>
    <button id="revealImpostor">Revelar impostor</button>

    <p id="impostorName" class="hidden" style="font-size: 22px; font-weight: bold; text-align:center;"></p>

    <button id="restartSame" class="secondary">Volver a jugar (mismos)</button>
    <button id="restartNew" style="margin-top:10px;">Empezar de nuevo</button>
  </div>
</section>

<script>
/* ---------- LISTA DE FUTBOLISTAS (500 nombres reconocibles) ---------- */
/* He combinado actuales, retirados y leyendas para m√°xima familiaridad. */
const FUTBOLISTAS = [
  // === LEYENDAS PRE-2010 (50) ===
  "Pel√©","Diego Maradona","Zinedine Zidane","Ronaldo Naz√°rio","Ronaldinho",
  "Thierry Henry","David Beckham","Paolo Maldini","Roberto Carlos","Cafu",
  "Luis Figo","Rivaldo","Iker Casillas","Gianluigi Buffon","Ra√∫l Gonz√°lez",
  "Carles Puyol","Xavi Hern√°ndez","Andr√©s Iniesta","Francesco Totti","Didier Drogba",
  "Samuel Eto'o","Kak√°","Ronald Koeman","Guti","Marcelo","Zlatan Ibrahimoviƒá",
  "Robinho","Ronaldo (Fen√≥meno)","Rivaldo","Puyol",

  // === ESTRELLAS POSTERIORES A 2010 (100) ===
  "Lionel Messi","Cristiano Ronaldo","Neymar","Kylian Mbapp√©","Karim Benzema",
  "Robert Lewandowski","Erling Haaland","Luka Modriƒá","Sergio Ramos",
  "Toni Kroos","Marcelo","Dani Alves","Gerard Piqu√©","Virgil van Dijk",
  "Luis Su√°rez","Antoine Griezmann","Vin√≠cius J√∫nior","Rodrygo","Jude Bellingham",
  "Pedri","Gavi","Frenkie de Jong","Ronald Araujo","Lamine Yamal",
  "Ferm√≠n L√≥pez","Federico Valverde","Eduardo Camavinga","Aur√©lien Tchouam√©ni",
  "Jo√£o F√©lix","Ansu Fati","Ousmane Demb√©l√©","Achraf Hakimi","Riyad Mahrez",
  "Mohamed Salah","Sadio Man√©","Kevin De Bruyne","Phil Foden","Bernardo Silva",
  "Bruno Fernandes","Paul Pogba","N'Golo Kant√©","Rapha√´l Varane","Harry Kane",
  "Marcus Rashford","Bukayo Saka","Jack Grealish","Declan Rice","Jadon Sancho",
  "Trent Alexander-Arnold","Andrew Robertson","Manuel Neuer","Joshua Kimmich","Thomas M√ºller",
  "Ilkay G√ºndogan","Marco Reus","Leroy San√©","Kai Havertz","Timo Werner",
  "Alphonso Davies","Jamal Musiala","Matthijs de Ligt","Memphis Depay","Romelu Lukaku",
  "Eden Hazard","Gianluigi Donnarumma","Federico Chiesa","Paulo Dybala","Lautaro Mart√≠nez",
  "√Ångel Di Mar√≠a","Sergio Ag√ºero","James Rodr√≠guez","Radamel Falcao","Juan Cuadrado",
  "Luis D√≠az","Enzo Fern√°ndez","Juli√°n √Ålvarez","Rodrigo De Paul","Yerry Mina",
  "Duv√°n Zapata","Christian Pulisic","Son Heung-min","Takefusa Kubo","Khvicha Kvaratskhelia",
  "Victor Osimhen","Alisson Becker","Thibaut Courtois","Jan Oblak","Marc-Andr√© ter Stegen",
  "Fabi√°n Ruiz","Marco Asensio","Iago Aspas","√Ålvaro Morata",
  "Philippe Coutinho","Casemiro","Gabriel Jesus","Raphinha","Hugo Lloris"
];

/* ---------- UTILIDADES DE AZAR Y BARAJADO ---------- */

/**
 * Fisher‚ÄìYates shuffle (in-place) ‚Äî devuelve el array barajado (nueva referencia).
 * Usamos copia externa para no mutar la lista original.
 */
function shuffle(array) {
  const a = array.slice();
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    const tmp = a[i];
    a[i] = a[j];
    a[j] = tmp;
  }
  return a;
}

/**
 * Selecci√≥n 'm√°s aleatoria' usando shuffle + doble √≠ndice aleatorio.
 * Devuelve un string (nombre de futbolista).
 */
function pickRandomWord() {
  // barajamos (copia)
  const shuffled = shuffle(FUTBOLISTAS);
  // dos √≠ndices aleatorios sumados, m√≥dulo longitud
  const r1 = Math.floor(Math.random() * shuffled.length);
  const r2 = Math.floor(Math.random() * shuffled.length);
  const idx = (r1 + r2 + Math.floor(Math.random()*shuffled.length)) % shuffled.length;
  return shuffled[idx];
}

/* VARIABLES DEL JUEGO */
let players = [];
let savedPlayers = null;
let current = 0;

/* CAMBIAR PANTALLA */
function show(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* CONFIRMAR JUGADORES */
document.getElementById("confirmPlayers").onclick = () => {
  const n = parseInt(document.getElementById("numPlayers").value);
  if (!n || n < 3 || n > 20) return alert("Introduce un n√∫mero v√°lido (3-20).");

  const container = document.getElementById("namesContainer");
  container.innerHTML = "";

  for (let i = 0; i < n; i++) {
    container.innerHTML += `<input type="text" class="nameInput" placeholder="Jugador ${i+1}">`;
  }

  show("screen2");
};

/* EMPEZAR PARTIDA */
document.getElementById("startGame").onclick = () => {
  const names = [...document.querySelectorAll('.nameInput')]
    .map(i => i.value.trim());

  if (names.some(n => !n)) return alert("Rellena todos los nombres.");

  players = names.map(n => ({ name: n }));
  savedPlayers = players.map(p => ({ ...p })); // guardamos para 'mismos' jugadores

  nuevaRonda();
};

/* GENERAR NUEVA RONDA */
function nuevaRonda() {
  // barajar el orden en que ver√°n su rol
  players = shuffle(players);

  // reset roles
  players.forEach(p => { p.impostor = false; p.word = null; });

  // nuevo impostor
  const imp = Math.floor(Math.random() * players.length);
  players[imp].impostor = true;

  // palabra compartida
  const palabra = pickRandomWord();
  players.forEach(p => { if (!p.impostor) p.word = palabra; });

  // reiniciar control
  current = 0;
  updateCard();
  show("screen3");
}


/* ACTUALIZAR TARJETA */
function updateCard() {
  const card = document.getElementById("flipCard");
  card.className = "flip";
  document.getElementById("btnNext").classList.add("hidden");
  document.getElementById("playerInstruction").textContent =
      `Jugador: ${players[current].name} (pulsa para ver)`;
  document.getElementById("playerCounter").textContent =
      `Jugador ${current+1} de ${players.length}`;
}

/* REVELAR ROL */
document.getElementById("flipCard").onclick = () => {
  const card = document.getElementById("flipCard");
  if (card.classList.contains("revealed")) return;

  const p = players[current];
  document.getElementById("btnNext").classList.remove("hidden");
  card.classList.add("revealed");

  if (p.impostor) {
    card.classList.add("impostor");
    document.getElementById("playerInstruction").textContent = "¬°ERES EL IMPOSTOR!";
  } else {
    document.getElementById("playerInstruction").textContent = "Palabra: " + p.word;
    card.classList.remove("impostor");
  }
};

/* SIGUIENTE JUGADOR */
document.getElementById("btnNext").onclick = () => {
  current++;
  if (current >= players.length) {
    const starter = players[Math.floor(Math.random()*players.length)].name;
    document.getElementById("starter").textContent = "Empieza hablando: " + starter;
    document.getElementById("impostorName").classList.add("hidden");
    show("screen4");
  } else {
    updateCard();
  }
};

/* REVELAR IMPOSTOR */
document.getElementById("revealImpostor").onclick = () => {
  const imp = players.find(p => p.impostor);
  const box = document.getElementById("impostorName");
  box.textContent = "El impostor era: " + (imp ? imp.name : "‚Äî");
  box.classList.remove("hidden");
};

/* VOLVER A JUGAR (MISMOS) */
document.getElementById("restartSame").onclick = () => {
  if (!savedPlayers || savedPlayers.length === 0) { alert("No hay jugadores guardados."); show("screen1"); return; }
  // restauramos los nombres y reiniciamos roles
  players = savedPlayers.map(p => ({ name: p.name }));
  nuevaRonda();
};

/* EMPEZAR DE NUEVO */
document.getElementById("restartNew").onclick = () => {
  savedPlayers = null;
  players = [];
  current = 0;
  document.getElementById("namesContainer").innerHTML = "";
  show("screen1");
};
</script>

<footer style="text-align:center; margin-top:20px; font-size:14px; color:#ccc;">
Espero que os guste el juego. Si quer√©is apoyarme, pod√©is hacer una peque√±a donaci√≥n a este n√∫mero (Bizum): 624325797 ‚Äî ¬°Gracias! üôè
</footer>
</body>
</html>

